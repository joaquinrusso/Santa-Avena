<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SantaAvena: Comida Org√°nica</title>
  <style>
    :root {
      --verde-principal: #8DC572;
      --verde-oscuro: #5B854B;
      --verde-medio: #AACFA5;
      --beige: #FFF9ED;
      --blanco: #fff;
      --gris: #ececec;
      --gris-texto: #555;
      --sombra: 0 8px 32px 0 rgba(60,90,60,0.12);
      --radius: 18px;
      --trans-smooth: cubic-bezier(.55,.13,.39,1.03);
      --blur: blur(3px);
    }
    html { scroll-behavior: smooth; }
    body {
      background: url('imagenes/alpaca.jpg') center/cover no-repeat fixed;
      min-height: 100vh; margin: 0; font-family: 'Segoe UI', Arial, sans-serif;
      color: var(--gris-texto);
      position: relative;
      transition: background 1.8s var(--trans-smooth);
    }
    body::before {
      content: "";
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,.38); z-index: -1; pointer-events: none;
    }
    header {
      background: rgba(141,197,114,0.9);
      color: var(--blanco);
      padding: 22px 0 13px 0;
      text-align: center;
      position: sticky; top: 0; z-index: 1000;
      box-shadow: var(--sombra);
      backdrop-filter: blur(6px);
      border-radius: 0 0 var(--radius) var(--radius);
      transition: background .7s var(--trans-smooth);
    }
    h1 { margin: 0; font-size: 2.1em; font-weight: 600; letter-spacing: .5px;}
    nav { margin-top: 14px; }
    nav button {
      background: var(--verde-oscuro); color: var(--blanco);
      padding: 10px 23px; border: none; border-radius: var(--radius);
      cursor: pointer; font-size: 1.08em; margin: 0 6px;
      transition: background .4s var(--trans-smooth), transform .18s;
      box-shadow: 0 2px 8px #0001;
      font-weight: 500;
    }
    nav button:focus-visible {
      outline: 2.5px solid var(--verde-principal);
      outline-offset: 2px;
    }
    nav button:hover { background: #6B9B59; transform: translateY(-2px) scale(1.04);}
    .main-screen { display: none; padding: 22px 0; max-width: 1160px; margin: auto; min-height: 80vh; }
    #landing-page { display: block; animation: fadeIn .8s;}
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .info-section, .featured-products-section, .testimonials-section {
      background: rgba(255,255,255,0.92);
      border-radius: var(--radius);
      box-shadow: var(--sombra);
      padding: 38px 5vw;
      margin: 44px 0;
      backdrop-filter: var(--blur);
      animation: fadeInUp .7s;
      transition: background .8s, box-shadow .5s;
    }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px);} to {opacity: 1; transform: none;}}
    .info-section h2, .featured-products-section h2, .testimonials-section h2 {
      color: var(--verde-principal); font-size: 2em; margin-bottom: 19px; border-bottom: none; font-weight: 700;
    }
    .info-section p, .featured-products-section .section-description { color: var(--gris-texto); font-size: 1.13em; }
    .section-description {
      color: var(--gris-texto);
      font-size: 1.13em;
      text-align: center;
      margin-bottom: 10px;
    }
    .valores-titulo {
      text-align: center;
      font-weight: bold;
      margin-top: 10px;
      margin-bottom: 3px;
      letter-spacing: .03em;
    }
    .valores-lista {
      text-align: center;
      margin-bottom: 9px;
      color: #5B854B;
      font-size: 1.09em;
    }
    .ingredientes-titulo {
      text-align: center;
      font-weight: bold;
      margin-top: 10px;
      margin-bottom: 3px;
      letter-spacing: .03em;
    }
    .ingredientes-lista {
      text-align: center;
      margin-bottom: 9px;
      color: #5B854B;
      font-size: 1.09em;
    }
    .action-button {
      background: linear-gradient(90deg,var(--verde-principal),var(--verde-oscuro));
      color: var(--blanco); padding: 13px 30px; border: none; border-radius: 100px;
      cursor: pointer; font-size: 1.13em; font-weight: 600; letter-spacing: .02em;
      box-shadow: 0 2px 14px #0001;
      transition: background .35s, box-shadow .3s, transform .13s;
    }
    .action-button:focus-visible { outline: 2.5px solid var(--verde-principal);}
    .action-button:hover {
      background: linear-gradient(90deg,#7bb05e,var(--verde-principal));
      box-shadow: 0 2px 22px #7bb05e22;
      transform: scale(1.04);
    }
    .main-wrapper {
      display: flex; justify-content: center; gap: 2.5vw;
    }
    .container { flex-grow: 1; max-width: 820px; }
    .banner-lateral {
      background: rgba(218,240,203,0.95); border: 1.5px solid #c8e0b2;
      color: #4d7836; border-radius: var(--radius); padding: 23px 15px;
      width: 250px; box-shadow: var(--sombra);
      align-self: flex-start; position: sticky; top: 27px; text-align: center; font-size: 1.14em;
      font-weight: 500; margin-bottom: 0;
      transition: background .6s;
      animation: fadeInRight .8s;
    }
    @keyframes fadeInRight { from {opacity:0; transform:translateX(30px);} to {opacity:1;transform:none;}}
    .banner-lateral strong { color: #5b854b; font-size: 1.2em; }
    section { margin-bottom: 38px; }
    h2 {
      border-bottom: 2px solid #e9e9e9;
      padding-bottom: 9px;
      margin-top: 0;
      font-weight: 600;
      text-align: center;
    }
    .productos-grid {
      display: grid; gap: 22px; grid-template-columns: 1fr 1fr;
    }
    .producto-card {
      background: rgba(255,255,255,0.96); border-radius: var(--radius);
      box-shadow: var(--sombra);
      padding: 16px; transition: transform .3s var(--trans-smooth), box-shadow .4s, background .4s;
      cursor: pointer;
      display: flex; flex-direction: column; align-items: center;
      min-height: 330px;
      animation: fadeInUp .6s;
    }
    .producto-card:hover {
      transform: translateY(-4px) scale(1.04);
      background: #f6faf5;
      box-shadow: 0 14px 32px -3px #7bb05e22;
    }
    .producto-card img {
      width: 100%; border-radius: 12px; height: 150px; object-fit: cover;
      box-shadow: 0 2px 10px #0001;
      transition: box-shadow .32s;
    }
    .producto-info { margin-top: 9px; text-align: center; }
    .producto-info h3 { margin: 0 0 5px; font-size: 1.12em; font-weight: 600;}
    .producto-controls { margin-top: 12px; display: flex; align-items: center; gap: 8px; justify-content: center; }
    .producto-controls input[type="number"] {
      width: 55px; padding: 8px; border: 1.1px solid #b7d7b3; border-radius: 8px; text-align: center;
      background: #f9fff2; color: #314e26; font-weight: 600; font-size: 1.12em;
      transition: border .2s;
    }
    .producto-controls input[type="number"]:focus-visible { border: 1.7px solid var(--verde-oscuro);}
    .producto-controls button {
      background: var(--verde-principal); color: #fff; border: none; border-radius: 7px;
      padding: 8px 18px; font-size: 1em; cursor: pointer; font-weight: 500;
      transition: background .19s, box-shadow .19s, transform .09s;
      box-shadow: 0 1px 7px #0001;
    }
    .producto-controls button:hover { background: var(--verde-oscuro); transform: scale(1.05);}
    .producto-precio {
      margin: 7px 0 0 0;
      font-size: 1.11em;
      font-weight: bold;
      color: #5B854B;
      letter-spacing: .01em;
    }
    .seccion-tienda {
      margin-bottom: 38px;
      background: rgba(255,255,255,0.93);
      border-radius: var(--radius);
      box-shadow: var(--sombra);
      padding: 25px 16px 8px 16px;
    }
    #carrito-box {
      background: #f6faf5da; border-radius: var(--radius); box-shadow: var(--sombra);
      margin: 23px 0 16px 0; padding: 23px 18px 18px 18px;
      animation: fadeIn .65s;
      min-height: 80px;
      transition: background .5s;
    }
    #carrito-list { margin: 0 0 11px 0; padding: 0; list-style: none;}
    #carrito-list li {
      margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center;
      font-size: 1.10em; animation: fadeInUp .33s;
      border-bottom: 1px solid #e9f2e1;
      padding-bottom: 5px;
      transition: background .2s;
    }
    #carrito-list li:last-child {border-bottom: none;}
    #carrito-list button {
      background: #e57373; border: none; border-radius: 4px; color: #fff; cursor: pointer; margin-left: 10px; padding: 4px 10px; font-size: 0.98em;
      transition: background .2s, transform .13s;
    }
    #carrito-list button:hover { background: #ba3535; transform: scale(1.09);}
    #carrito-total { font-weight: bold; color: var(--verde-oscuro); letter-spacing: .5px;}
    .pago-info { background: #fff8f0; padding: 15px; border-left: 5px solid var(--verde-principal); margin-bottom: 19px; border-radius: 8px; }
    form {
      background: rgba(255,255,255,0.91); padding: 20px; border-radius: var(--radius);
      box-shadow: var(--sombra); font-size: 1.06em;
      animation: fadeInUp .5s;
      transition: background .3s;
    }
    input[type="text"], input[type="tel"], select {
      width: 100%; padding: 10px; margin: 10px 0 20px 0; border: 1.3px solid #b7d7b3;
      border-radius: 8px; background: #f9fff2; color: #314e26;
      font-size: 1.11em; font-weight: 500;
      transition: border .18s;
    }
    input[type="text"]:focus-visible, input[type="tel"]:focus-visible, select:focus-visible {
      border: 2px solid var(--verde-oscuro);
      outline: none;
    }
    button[type="submit"] {
      background: linear-gradient(90deg,var(--verde-principal),var(--verde-oscuro));
      color: #fff; padding: 10px 23px; border: none; border-radius: 100px;
      cursor: pointer; font-size: 1.12em; font-weight: 600; transition: background .3s, transform .09s;
      box-shadow: 0 2px 10px #0001;
    }
    button[type="submit"]:hover { background: linear-gradient(90deg,#6B9B59,var(--verde-principal)); transform: scale(1.04);}
    #mensaje-carrito {
      display: none;
      position: fixed;
      left: 50%;
      top: 24px;
      transform: translateX(-50%);
      background: #88b04b;
      color: #fff;
      padding: 16px 30px;
      border-radius: 30px;
      font-size: 1.13em;
      box-shadow: 0 5px 20px #0003;
      z-index: 20000;
      animation: fadeInOut 2s;
      pointer-events: none;
      font-weight: 600;
      letter-spacing: .03em;
      transition: opacity .3s;
    }
    .testimonials-section {
      padding: 18px 3vw !important;
      margin: 32px 0 !important;
    }
    .testimonials-section h2 {
      font-size: 1.2em !important;
      margin-bottom: 11px !important;
    }
    .comentarios-form {
      margin: 12px 0 5px 0;
      display: flex;
      flex-direction: column;
      gap: 6px;
      align-items: stretch;
      background: #fafdf7;
      border-radius: 10px;
      box-shadow: 0 2px 8px #0001;
      padding: 8px 7px 8px 7px;
      font-size: 0.96em;
    }
    .comentarios-form input, .comentarios-form textarea, .comentarios-form select {
      border-radius: 6px;
      border: 1.1px solid #b7d7b3;
      padding: 6px 7px;
      font-size: 0.97em;
      background: #f9fff2;
      color: #314e26;
      font-family: inherit;
      resize: none;
      transition: border .2s;
    }
    .comentarios-form input:focus-visible, .comentarios-form textarea:focus-visible, .comentarios-form select:focus-visible {
      border: 1.5px solid var(--verde-oscuro);
      outline: none;
    }
    .comentarios-form button {
      align-self: flex-end;
      padding: 6px 16px;
      background: var(--verde-principal);
      color: #fff;
      border: none;
      cursor: pointer;
      border-radius: 100px;
      font-weight: 600;
      font-size: 1em;
      box-shadow: 0 2px 10px #0001;
      transition: background .18s, transform .09s;
    }
    .comentarios-form button:hover {
      background: var(--verde-oscuro);
      transform: scale(1.03);
    }
    .estrellas-selector {
      display: flex;
      gap: 4px;
      align-items: center;
      font-size: 1.3em !important;
      margin: 2px 0 4px 0 !important;
      justify-content: flex-start;
    }
    .estrella {
      cursor: pointer;
      color: #d1d1d1;
      transition: color .21s, transform .18s;
      font-size: 1em;
      padding: 0 1px;
      user-select: none;
    }
    .estrella.seleccionada {
      color: #FFD600;
      text-shadow: 0 1px 3px #0003;
      transform: scale(1.13);
    }
    .estrella:hover, .estrella:focus {
      color: #FFB300;
      transform: scale(1.16);
    }
    #user-comentarios-list {
      list-style: none;
      padding: 0;
      margin-top: 6px;
      font-size: 0.98em;
    }
    #user-comentarios-list li {
      background: #f2faec;
      border-radius: 7px;
      margin-bottom: 6px;
      padding: 7px 11px;
      box-shadow: 0 2px 12px #0001;
      font-size: 1em;
      animation: fadeInUp .22s;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }
    .comentario-nombre {
      color: #5B854B;
      font-weight: 500;
      margin-bottom: 1px;
      font-size: 1em;
    }
    .comentario-fila-superior {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      gap: 7px;
      flex-wrap: wrap;
      margin-bottom: 1px;
      font-size: 0.97em;
    }
    .comentario-producto {
      color: #7bb05e;
      font-weight: 600;
      font-size: 1em;
      margin-right: 7px;
    }
    .estrellitas-mostradas {
      font-size: 1em;
      color: #FFD600;
      letter-spacing: 0.02em;
    }
    @media (max-width: 900px) {
      .main-wrapper { flex-direction: column; align-items: center; }
      .banner-lateral { position: static; width: 97%; margin-bottom: 30px; order: -1; }
      .container { padding: 0 2vw; max-width: 100%; }
      .productos-grid { grid-template-columns: 1fr; }
    }
    @media (max-width: 600px) {
      .main-screen {padding: 9px 0;}
      .info-section, .featured-products-section, .testimonials-section {padding: 14px 2vw;}
      header { padding: 13px 0 8px 0;}
      nav button { padding: 8px 12px; font-size:1em;}
      h1 {font-size:1.11em;}
      .comentarios-section {padding: 8px 0 0 0;}
      .comentario-fila-superior {flex-direction: column; align-items: flex-start;}
    }
  </style>
</head>
<body>
  <header>
    <h1>SantaAvena: Lo Mejor de la Avena, Hecho con Amor en Santa Elena.</h1>
    <nav>
      <button id="show-informativa">Inicio</button>
      <button id="show-tienda">Tienda</button>
    </nav>
  </header>
  <div id="landing-page" class="main-screen">
    <section class="featured-products-section">
      <h2>Nuestros Imprescindibles: Sabor y Bienestar</h2>
      <p class="section-description">
        Snacks proteicos para acompa√±ar tus desayunos/meriendas. ¬°Alimento de verdad!
      </p>
      <div class="productos-grid">
        <div class="producto-card">
          <img src="imagenes/budin.jpg" alt="Bud√≠n Org√°nico de Avena y Superalimentos" />
          <div class="producto-info">
            <h3 style="text-align:center;">Bud√≠n Org√°nico de Avena</h3>
            <div class="valores-titulo">INGREDIENTES</div>
            <div class="valores-lista">
              Avena, coco, nueces, cacao, huevo, esencia de vainilla, chips de chocolate semi-amargo.
            </div>
            <div class="valores-titulo" style="margin-top:20px;">VALORES NUTRICIONALES</div>
            <div class="valores-lista">
              63 g prote√≠na<br>
              260 g carbohidratos<br>
              36 g fibra
            </div>
            <button class="action-button" onclick="showTienda()">Ver</button>
          </div>
        </div>
        <div class="producto-card">
          <img src="imagenes/galletaavena.jpg" alt="Galletas de Avena (chocolate)" />
          <div class="producto-info">
            <h3 style="text-align:center;">Galletas de Avena (chocolate)</h3>
            <div class="valores-titulo">INGREDIENTES</div>
            <div class="valores-lista">
              avena, cacao amargo, azucar mascabo, coco rallado, chips de chocolate semi-amargo.
            </div>
            <div class="valores-titulo" style="margin-top:20px;">VALORES NUTRICIONALES</div>
            <div class="valores-lista">
              6 g prote√≠na<br>
              2 g fibra<br>
              150 kcal
            </div>
            <button class="action-button" onclick="showTienda()">Ver</button>
          </div>
        </div>
      </div>
    </section>
    <section class="testimonials-section">
      <h2>Lo que dicen nuestros clientes</h2>
      <ul id="user-comentarios-list"></ul>
      <form class="comentarios-form" id="form-comentario" autocomplete="off">
        <input type="text" id="nombre-comentario" placeholder="Nombre y apellido" maxlength="40" required>
        <select id="producto-comentario" required>
          <option value="">Seleccion√° el producto</option>
        </select>
        <label style="font-weight:bold; margin-bottom:2px; margin-top:2px; color:#5B854B; font-size:1em;">
          Eleg√≠ tu calificaci√≥n:
          <div class="estrellas-selector" id="estrellas-selector" aria-label="Selecciona cu√°ntas estrellas" style="font-size:1.3em; margin:2px 0 0 0;">
            <span class="estrella" data-valor="1" tabindex="0">&#9733;</span>
            <span class="estrella" data-valor="2" tabindex="0">&#9733;</span>
            <span class="estrella" data-valor="3" tabindex="0">&#9733;</span>
            <span class="estrella" data-valor="4" tabindex="0">&#9733;</span>
            <span class="estrella" data-valor="5" tabindex="0">&#9733;</span>
            <span id="estrellas-texto" style="margin-left:8px; font-size:.95em; color:#5B854B; vertical-align:middle;"></span>
          </div>
        </label>
        <textarea id="texto-comentario" rows="2" maxlength="220" placeholder="Cont√°nos tu experiencia... (opcional)"></textarea>
        <button type="submit">Enviar</button>
      </form>
    </section>
  </div>
  <div id="shop-page" class="main-screen">
    <div class="main-wrapper">
      <aside class="banner-lateral">
        <p>¬°Promoci√≥n especial!</p>
        <p>
          Compartiendo una historia de tu pedido y etiquetando <strong>EL LINK</strong> de la p√°gina, ten√©s un <strong>10% de descuento</strong> en tu pr√≥ximo pedido.
        </p>
        <p style="word-break:break-all;">
          <a id="promo-link" href="https://joaquinrusso.github.io/Santa-Avena/" target="_blank" style="color:#4d7836; font-weight:bold; text-decoration:underline;">
            https://joaquinrusso.github.io/Santa-Avena/
          </a>
          <button id="copiar-promo-link" style="margin-left:10px; padding:3px 9px; font-size:0.98em; border-radius:5px; border:1px solid #b7d7b3; background:#f4fff0; color:#314e26; cursor:pointer;">
            Copiar enlace
          </button>
        </p>
        <span id="mensaje-copiado" style="display:none; color: #4d7836; font-size:0.96em; margin-left:8px;">¬°Enlace copiado!</span>
      </aside>
      <!-- ...Resto de la tienda aqu√≠... -->
    </div>
  </div>
  <script>
    // Navegaci√≥n entre pantallas
    function showScreen(screenToShow) {
      document.getElementById('landing-page').style.display = 'none';
      document.getElementById('shop-page').style.display = 'none';
      if (screenToShow === 'landing') {
        document.getElementById('landing-page').style.display = 'block';
      } else {
        document.getElementById('shop-page').style.display = 'block';
      }
    }
    function showTienda() { showScreen('shop'); }
    document.getElementById('show-informativa').onclick = () => showScreen('landing');
    document.getElementById('show-tienda').onclick = showTienda;
    showScreen('landing');
  </script>
  <script>
    // Comentarios conectados a Google Sheets
    const API_URL = "https://script.google.com/macros/s/AKfycby_m6X30NqqsRijkRQL293MnPEzMh1-y_Qm3fiovbJpHkfAcDPvbseJmoumiE3Y-rY/exec";
    let estrellasSeleccionadas = 0;
    const estrellas = document.querySelectorAll('#estrellas-selector .estrella');
    const estrellasTexto = document.getElementById('estrellas-texto');
    estrellas.forEach((estrella, idx) => {
      estrella.addEventListener('click', () => setEstrellas(idx + 1));
      estrella.addEventListener('keydown', e => {
        if (e.key === "Enter" || e.key === " ") setEstrellas(idx + 1);
      });
    });
    function setEstrellas(valor) {
      estrellasSeleccionadas = valor;
      estrellas.forEach((e, i) => {
        e.classList.toggle('seleccionada', i < valor);
      });
      estrellasTexto.textContent = valor > 0 ? `${valor} estrella${valor > 1 ? "s" : ""}` : '';
    }
    document.getElementById('form-comentario').addEventListener('submit', function(e) {
      e.preventDefault();
      const nombre = document.getElementById('nombre-comentario').value.trim();
      const producto = document.getElementById('producto-comentario').value;
      const comentario = document.getElementById('texto-comentario').value.trim();
      const estrellas = estrellasSeleccionadas;
      if (!nombre || !producto || estrellas < 1) {
        alert("Por favor complet√° nombre, producto y calificaci√≥n.");
        return;
      }
      fetch(API_URL, {
        method: 'POST',
        body: JSON.stringify({nombre, producto, estrellas, comentario}),
        headers: {'Content-Type': 'application/json'}
      }).then(() => {
        document.getElementById('form-comentario').reset();
        setEstrellas(0);
        cargarComentarios();
      });
    });
    function cargarComentarios() {
      fetch(API_URL)
        .then(res => res.json())
        .then(data => {
          let html = '';
          data.reverse().forEach(c => {
            html += `<li>
              <div class="comentario-fila-superior">
                <span class="comentario-producto">${c.producto || ''}</span>
                <span class="estrellitas-mostradas">${mostrarEstrellitas(c.estrellas)}</span>
              </div>
              <div class="comentario-nombre">${c.nombre}</div>
              <div>${c.comentario || ''}</div>
            </li>`;
          });
          document.getElementById('user-comentarios-list').innerHTML = html;
        });
    }
    function mostrarEstrellitas(num) {
      let n = parseInt(num) || 0;
      return '‚òÖ'.repeat(n) + '‚òÜ'.repeat(5 - n);
    }
    // Opcional: Llenar el select con productos
    const productos = ["Mix Org√°nico", "Granola", "Pan de semillas"];
    const select = document.getElementById('producto-comentario');
    productos.forEach(prod => {
      const opt = document.createElement('option');
      opt.value = prod;
      opt.textContent = prod;
      select.appendChild(opt);
    });
    cargarComentarios();
  </script>
  <script>
    // Bot√≥n "Copiar enlace"
    document.getElementById('copiar-promo-link').addEventListener('click', function() {
      const link = document.getElementById('promo-link').href;
      navigator.clipboard.writeText(link).then(function() {
        const msj = document.getElementById('mensaje-copiado');
        msj.style.display = 'inline';
        setTimeout(() => { msj.style.display = 'none'; }, 1700);
      });
    });
  </script>
</body>
</html>
